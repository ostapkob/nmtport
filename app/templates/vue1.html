{% extends "base.html" %}
{% block main %}
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>

<div id="app">
    <div @click="get_data"> {{' {{ counter }} '}} </div>
   <table class="table table-striped">
  <thead>
    <tr>
      <th scope="col">Name</th>
      <th scope="col">Value</th>
      <th scope="col">Latitude</th>
      <th scope="col">Longitude</th>
      <th scope="col">Time</th>
    </tr>
  </thead>
  <tbody> 
    <tr scope="row" v-for="el in all_data">
        <td>  {{ '   {{ el.name }}  '}}   </td>
        <td>  {{ '   {{ el.value }}  '}}   </td>
        <td>  {{ '   {{ el.latitude }}  '}}   </td>
        <td>  {{ '   {{ el.longitude }}  '}}   </td>
        <td>  {{ '   {{ el.time  }} '}}   </td>
    </tr>
  </tbody>
    </table>
</div>





<script>
var app = new Vue({
  el: '#app',
  data: {
    counter: 3,
    all_data: [],
    http : ['http://127.0.0.1:5000/api/v1.0/all_last_data', 'http://35.241.126.216/api/v1.0/all_last_data']
  },
    methods: {
        hight() {
        this.counter++;
        console.log(this.status);
        },
        get_data() {
            axios.get(this.http[0]).then((response) => {
            console.log(response.data);
            this.all_data=response.data;
            });
        }
    },
mounted: function () {
        this.$nextTick(function () {
            window.setInterval(() => {
                this.get_data();
            },5000);
        })
    }


})

</script>


{% endblock %}
